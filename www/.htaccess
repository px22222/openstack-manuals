{% set series = 'latest' %}
{% set projects = PROJECT_DATA[series] %}

# Redirecting End-of-Life (EOL) versions, see https://wiki.openstack.org/wiki/Releases:
redirectmatch 301 /bexar/.*$ /index.html
redirectmatch 301 /cactus/.*$ /index.html
redirectmatch 301 /diablo/.*$ /index.html
redirectmatch 301 /essex/.*$ /index.html
redirectmatch 301 /folsom/.*$ /index.html
redirectmatch 301 /grizzly/.*$ /index.html
redirectmatch 301 /havana/.*$ /index.html

# We still have the config-reference available
redirectmatch 301 /icehouse/(?!config-reference)/.*$ /index.html
redirectmatch 301 /juno/(?!config-reference)/.*$ /index.html
redirectmatch 301 /kilo/(?!config-reference)/.*$ /index.html
redirectmatch 301 /liberty/(?!config-reference)/.*$ /index.html

# Redirect for the original version of compute
redirectmatch 301 /openstack-compute/.*$ /index.html
redirectmatch 301 /trunk/openstack-compute/starter/.*$ /index.html

# Redirect for the original version of storage
redirectmatch 301 /openstack-object-storage/.*$ /index.html

# Redirect image metadata and format reference
redirect 301 /trunk/openstack-compute/admin/content/adding-images.html /cli-reference/glance-property-keys.html

# Redirect config reference precisely
redirect 301 /trunk/openstack-compute/admin/content/compute-options-reference.html /ocata/config-reference/compute/nova-conf.html

# Redirecting incubation quantum
redirectmatch 301 /incubation/openstack-network/admin/content/ /admin-guide/networking.html
redirectmatch 301 /incubation/openstack-network/developer/quantum-api-1.0/content/ https://developer.openstack.org/api-guide/quick-start/

# Redirecting old install guide to apt (could be yum, analytics show more seek apt)
redirectmatch 301 /trunk/openstack-compute/install/content/.*$ /index.html

# Redirecting trunk basic install to install guide
redirect 301 /trunk/basic-install/apt/content /ocata/install-guide-ubuntu/
redirect 301 /trunk/basic-install/yum/content /ocata/install-guide-rdo/

# redirect kilo install guide
redirectmatch 301 /kilo/install-guide.*$ /index.html

# redirect liberty install guide
redirectmatch 301 /liberty/install-guide.*$ /index.html

# Redirecting trunk admin guides to admin-guide
redirect 301 /trunk/openstack-block-storage/admin/content/ /admin-guide/
redirect 301 /trunk/openstack-compute/admin/content/ /admin-guide/
redirect 301 /trunk/openstack-object-storage/admin/content/ /admin-guide/

# Redirecting Image Guide to new location
redirect 301 /trunk/openstack-image/content/ /image-guide/

# Redirecting HA Guide to new location
redirect 301 /trunk/openstack-ha/content/ /ha-guide
redirectmatch 301 /high-availability-guide/.*$ /ha-guide/index.html

# Redirecting security guide to new location
redirectmatch 301 /trunk/openstack-security/content/.*$ /security-guide/index.html
redirectmatch 301 /trunk/security-guide/content/.*$ /security-guide/index.html
redirectmatch 301 /security-guide/content/.*$ /security-guide/index.html

# Redirecting API Programming with Compute API to API Quick Start
redirectmatch 301 /api/openstack-compute/programmer/content/.*$ http://developer.openstack.org/api-guide/quick-start/

# Redirect docs.openstack.org index.html subpage pointers to main page
redirect 301 /install/ /
redirect 301 /basic-install/ /
redirect 301 /run/ /
redirect 301 /api/index.html /
redirect 301 /developer/index.html /openstack-projects.html
redirect 301 /cli/ /
redirect 301 /incubation/ /
redirect 301 /api/api-specs.html http://developer.openstack.org/api-guide/quick-start/index.html

# Redirect old identity/api to api site
redirectmatch /identity/api/.*$ http://developer.openstack.org/

# Redirect old Networking Admin Guide to Configuration Reference
redirectmatch /trunk/openstack-network/admin/content/.*$ /admin-guide/index.html
redirectmatch /network-admin/admin/content/.*$ /admin-guide/index.html

# Redirect O'Reilly Operations Guide PDF to trunk version
redirect 301 /trunk/openstack-ops/oreilly-openstack-ops-guide.pdf /openstack-ops/openstack-ops-manual.pdf

# Redirect Operations Guide to /ops-guide/
redirectmatch 301 /trunk/openstack-ops/.*$ /ops-guide/
redirectmatch 301 /ops/.*$ /ops-guide/index.html

# Redirect Operations Guide architecture part to Architecture Guide
redirectmatch 301 /ops-guide/arch.*$ /arch-design/index.html

# Redirect Operations Guide operations to index
redirect 301 /ops-guide/operations.html /ops-guide/index.html

# Redirect Architecture Guide to /arch-design/
redirect 301 /arch/index.html /arch-design/index.html

# Redirect Security Guide to /security-guide/
redirect 301 /sec/index.html /security-guide/index.html

# A doc generation bug resulted in Google indexing links containing "//", which cause
# problems with linked content (images/css/etc).  This rule generates a 301 redirect
# for these links.
#
# details: https://bugs.launchpad.net/openstack-manuals/+bug/1288513
redirectmatch 301 (.*)//(.*) $1/$2

# Redirect renamed ironic developer doc directories
redirect 301 /developer/ironic/install/ironic-install.html /developer/ironic/deploy/install-guide.html
redirect 301 /developer/ironic/dev/api-spec-v1.html /developer/ironic/webapi/v1.html

# Redirect API docs that have been put in openstack-attic
redirectmatch 301 /api/openstack-block-storage/1.0/content/.*$ https://developer.openstack.org/api-ref-blockstorage-v1.html
redirectmatch 301 /api/openstack-block-storage/2.0/content/.*$ https://developer.openstack.org/api-ref-blockstorage-v2.html
redirectmatch 301 /api/openstack-compute/2/content/.*$ https://developer.openstack.org/api-ref-compute-v2.html
redirectmatch 301 /api/openstack-databases/content/.*$ https://developer.openstack.org/api-ref-databases-v1.html
redirectmatch 301 /api/openstack-identity-service/2.0/content/.*$ https://developer.openstack.org/api-ref-identity-v2.html
redirectmatch 301 /api/openstack-identity-service/3/content/.*$ https://developer.openstack.org/api-ref-identity-v3.html
redirectmatch 301 /api/openstack-image-service/1.0/content/.*$ https://developer.openstack.org/api-ref-image-v1.html
redirectmatch 301 /api/openstack-image-service/1.1/content/.*$ https://developer.openstack.org/api-ref-image-v1.html
redirectmatch 301 /api/openstack-image-service/2.0/content/.*$ https://developer.openstack.org/api-ref-image-v2.html
redirectmatch 301 /api/openstack-network/2.0/content/.*$ https://developer.openstack.org/api-ref-networking-v2.html
redirectmatch 301 /api/openstack-object-storage/1.0/content/.*$ https://developer.openstack.org/api-ref-objectstorage-v1.html
redirectmatch 301 /api/openstack-objectstorage/1.0/content/.*$ https://developer.openstack.org/api-ref-objectstorage-v1.html
redirect 301 /api/openstack-image-service/2.0/content/appendix-b-http-patch-media-types.html https://specs.openstack.org/openstack/glance-specs/specs/api/v2/http-patch-image-api-v2.html

# Redirect /trunk/index.html to /index.html
redirect 301 /trunk/index.html /index.html

# Redirect trunk/config-reference to ocata/config-reference
redirectmatch 301 /trunk/config-reference/content/.*$ /ocata/config-reference/index.html

# Redirect trove install guide
redirectmatch 301 "^/kilo/install-guide/install/.*/ch_trove.html$" /
redirectmatch 301 "^/kilo/install-guide/install/.*/trove.*$" /

# Redirect sahara install guide
redirectmatch 301 "^/kilo/install-guide/install/.*/ch_sahara.html$" /
redirectmatch 301 "^/kilo/install-guide/install/.*/sahara.*$" /

# Redirect old networking content to root for now
redirectmatch 301 /openstack-network/.*$ /index.html

# Redirect renamed common files
redirectmatch 301 ^/([a-z-]+)/common/app_support.html /$1/common/app-support.html
redirectmatch 301 ^/([a-z-]+)/common/cli_discover_version_number_for_a_client.html /$1/common/cli-discover-version-number-for-a-client.html
redirectmatch 301 ^/([a-z-]+)/common/cli_install_openstack_command_line_clients.html /$1/common/cli-install-openstack-command-line-clients.html
redirectmatch 301 ^/([a-z-]+)/common/cli_manage_images.html /$1/common/cli-manage-images.html
redirectmatch 301 ^/([a-z-]+)/common/cli_manage_volumes.html /$1/common/cli-manage-volumes.html
redirectmatch 301 ^/([a-z-]+)/common/cli_overview.html /$1/common/cli-overview.html
redirectmatch 301 ^/([a-z-]+)/common/cli_set_environment_variables_using_openstack_rc.html /$1/common/cli-set-environment-variables-using-openstack-rc.html
redirectmatch 301 ^/([a-z-]+)/common/dashboard_customizing.html /$1/common/dashboard-customizing.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_block_storage.html /$1/common/get-started-block-storage.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_compute.html /$1/common/get-started-compute.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_conceptual_architecture.html /$1/common/get-started-conceptual-architecture.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_dashboard.html /$1/common/get-started-dashboard.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_data_processing.html /$1/common/get-started-data-processing.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_database_service.html /$1/common/get-started-database-service.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_feedback.html /$1/common/app-support.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_identity.html /$1/common/get-started-identity.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_image_service.html /$1/common/get-started-image-service.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_logical_architecture.html /$1/common/get-started-logical-architecture.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_networking.html /$1/common/get-started-networking.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_object_storage.html /$1/common/get-started-object-storage.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_openstack_services.html /$1/common/get-started-openstack-services.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_orchestration.html /$1/common/get-started-orchestration.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_shared_file_systems.html /$1/common/get-started-shared-file-systems.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_storage_concepts.html /$1/common/get-started-storage-concepts.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_telemetry.html /$1/common/get-started-telemetry.html
redirectmatch 301 ^/([a-z-]+)/common/get_started_with_openstack.html /$1/common/get-started-with-openstack.html
redirectmatch 301 ^/([a-z-]+)/common/nova_show_usage_statistics_for_hosts_instances.html /$1/common/nova-show-usage-statistics-for-hosts-instances.html

# Redirect top ten (or so) User Guide pages post-migration
redirect 301 /user-guide/content/app_community_support.html /user-guide/common/app-support.html
redirect 301 /user-guide/content/checking_version_cli.html /user-guide/common/cli-discover-version-number-for-a-client.html
redirect 301 /user-guide/content/install_clients.html /user-guide/common/cli-install-openstack-command-line-clients.html
redirect 301 /user-guide/content/ssh-into-instance.html /user-guide/dashboard_launch_instances.html#connect-to-your-instance-by-using-ssh
redirect 301 /user-guide/content/app_cheat_sheet.html /user-guide/cli_cheat_sheet.html
redirect 301 /user-guide/content/Launching_Instances_using_Dashboard.html /user-guide/dashboard_launch_instances.html

# Redirect top ten (or so) Admin User Guide pages post-migration
redirect 301 /user-guide-admin/content/specify-host-to-boot-instances-on.html /admin-guide/cli-nova-specify-host.html
redirect 301 /user-guide-admin/content/nova_cli_migrate_single.html /admin-guide/cli-nova-migrate.html
redirect 301 /admin-guide-cloud/content/customize-flavors.html /admin-guide/compute-flavors.html

# Redirect renamed Admin Guide pages

redirect 301 /admin-guide/blockstorage_backup_disks.html /admin-guide/blockstorage-backup-disks.html
redirect 301 /admin-guide/blockstorage_get_capabilities.html /admin-guide/blockstorage-get-capabilities.html
redirect 301 /admin-guide/blockstorage_glusterfs_backend.html /admin-guide/blockstorage-glusterfs-backend.html
redirect 301 /admin-guide/blockstorage_glusterfs_removal.html /admin-guide/blockstorage-glusterfs-removal.html
redirect 301 /admin-guide/blockstorage_image_volume_cache.html /admin-guide/blockstorage-image-volume-cache.html
redirect 301 /admin-guide/blockstorage_multi_backend.html /admin-guide/blockstorage-multi-backend.html
redirect 301 /admin-guide/blockstorage_nfs_backend.html /admin-guide/blockstorage-nfs-backend.html
redirect 301 /admin-guide/blockstorage_over_subscription.html /admin-guide/blockstorage-over-subscription.html
redirect 301 /admin-guide/blockstorage_ratelimit_volume_copy_bandwidth.html /admin-guide/blockstorage-ratelimit-volume-copy-bandwidth.html
redirect 301 /admin-guide/blockstorage_volume_backed_image.html /admin-guide/blockstorage-volume-backed-image.html
redirect 301 /admin-guide/blockstorage_volume_backups.html /admin-guide/blockstorage-volume-backups.html
redirect 301 /admin-guide/blockstorage_volume_backups_export_import.html /admin-guide/blockstorage-volume-backups-export-import.html
redirect 301 /admin-guide/blockstorage_volume_migration.html /admin-guide/blockstorage-volume-migration.html
redirect 301 /admin-guide/blockstorage_volume_number_weigher.html /admin-guide/blockstorage-volume-number-weigher.html
redirect 301 /admin-guide/cli_admin_manage_environment.html /admin-guide/cli-admin-manage-environment.html
redirect 301 /admin-guide/cli_admin_manage_ip_addresses.html /admin-guide/cli-admin-manage-ip-addresses.html
redirect 301 /admin-guide/cli_admin_manage_stacks.html /admin-guide/cli-admin-manage-stacks.html
redirect 301 /admin-guide/cli_analyzing-log-files-with-swift.html /admin-guide/cli-analyzing-log-files-with-swift.html
redirect 301 /admin-guide/cli_cinder_quotas.html /admin-guide/cli-cinder-quotas.html
redirect 301 /admin-guide/cli_cinder_scheduling.html /admin-guide/cli-cinder-scheduling.html
redirect 301 /admin-guide/cli_keystone_manage_services.html /admin-guide/cli-keystone-manage-services.html
redirect 301 /admin-guide/cli_manage_flavors.html /admin-guide/cli-manage-flavors.html
redirect 301 /admin-guide/cli_manage_projects_users_and_roles.html /admin-guide/cli-manage-projects-users-and-roles.html
redirect 301 /admin-guide/cli_manage_services.html /admin-guide/cli-manage-services.html
redirect 301 /admin-guide/cli_manage_shares.html /admin-guide/cli-manage-shares.html
redirect 301 /admin-guide/cli_networking_advanced_quotas.html /admin-guide/cli-networking-advanced-quotas.html
redirect 301 /admin-guide/cli_nova_evacuate.html /admin-guide/cli-nova-evacuate.html
redirect 301 /admin-guide/cli_nova_manage_projects_security.html /admin-guide/cli-nova-manage-projects-security.html
redirect 301 /admin-guide/cli_nova_manage_services.html /admin-guide/cli-nova-manage-services.html
redirect 301 /admin-guide/cli_nova_migrate.html /admin-guide/cli-nova-migrate.html
redirect 301 /admin-guide/cli_nova_migrate_cfg_ssh.html /admin-guide/cli-nova-migrate-cfg-ssh.html
redirect 301 /admin-guide/cli_nova_numa_libvirt.html /admin-guide/cli-nova-numa-libvirt.html
redirect 301 /admin-guide/cli_nova_specify_host.html /admin-guide/cli-nova-specify-host.html
redirect 301 /admin-guide/cli_set_compute_quotas.html /admin-guide/cli-set-compute-quotas.html
redirect 301 /admin-guide/cli_set_quotas.html /admin-guide/cli-set-quotas.html
redirect 301 /admin-guide/compute_arch.html /admin-guide/compute-arch.html
redirect 301 /admin-guide/compute-numa-cpu-pinning.html /admin-guide/compute-cpu-topologies.html
redirect 301 /admin-guide/cross_project.html /admin-guide/cross-project.html
redirect 301 /admin-guide/cross_project_cors.html /admin-guide/cross-project-cors.html
redirect 301 /admin-guide/dashboard_admin_manage_roles.html /admin-guide/dashboard-admin-manage-roles.html
redirect 301 /admin-guide/dashboard_admin_manage_stacks.html /admin-guide/dashboard-admin-manage-stacks.html
redirect 301 /admin-guide/dashboard_manage_flavors.html /admin-guide/dashboard-manage-flavors.html
redirect 301 /admin-guide/dashboard_manage_host_aggregates.html /admin-guide/dashboard-manage-host-aggregates.html
redirect 301 /admin-guide/dashboard_manage_images.html /admin-guide/dashboard-manage-images.html
redirect 301 /admin-guide/dashboard_manage_instances.html /admin-guide/dashboard-manage-instances.html
redirect 301 /admin-guide/dashboard_manage_resources.html /admin-guide/dashboard-manage-resources.html
redirect 301 /admin-guide/dashboard_manage_services.html /admin-guide/dashboard-manage-services.html
redirect 301 /admin-guide/dashboard_manage_shares.html /admin-guide/dashboard-manage-shares.html
redirect 301 /admin-guide/dashboard_manage_volumes.html /admin-guide/dashboard-manage-volumes.html
redirect 301 /admin-guide/dashboard_sessions.html /admin-guide/dashboard-sessions.html
redirect 301 /admin-guide/dashboard_set_quotas.html /admin-guide/dashboard-set-quotas.html
redirect 301 /admin-guide/dashboard_view_cloud_resources.html /admin-guide/dashboard-view-cloud-resources.html
redirect 301 /admin-guide/identity_auth_token_middleware.html /admin-guide/identity-auth-token-middleware.html
redirect 301 /admin-guide/identity_concepts.html /admin-guide/identity-concepts.html
redirect 301 /admin-guide/identity_keystone_usage_and_features.html /admin-guide/identity-keystone-usage-and-features.html
redirect 301 /admin-guide/identity_management.html /admin-guide/identity-management.html
redirect 301 /admin-guide/identity_service_api_protection.html /admin-guide/identity-service-api-protection.html
redirect 301 /admin-guide/identity_start.html /admin-guide/identity-start.html
redirect 301 /admin-guide/identity_troubleshoot.html /admin-guide/identity-troubleshoot.html

redirect 301 /admin-guide/keystone_caching_layer.html /admin-guide/identity-caching-layer.html
redirect 301 /admin-guide/keystone_certificates_for_pki.html /admin-guide/identity-certificates-for-pki.html
redirect 301 /admin-guide/keystone_domain_specific_config.html /admin-guide/identity-domain-specific-config.html
redirect 301 /admin-guide/keystone_external_authentication.html /admin-guide/identity-external-authentication.html
redirect 301 /admin-guide/keystone_fernet_token_faq.html /admin-guide/identity-fernet-token-faq.html
redirect 301 /admin-guide/keystone_integrate_identity_backend_ldap.html /admin-guide/identity-integrate-identity-backend-ldap.html
redirect 301 /admin-guide/keystone_integrate_with_ldap.html /admin-guide/identity-integrate-with-ldap.html
redirect 301 /admin-guide/keystone_secure_identity_to_ldap_backend.html /admin-guide/identity-secure-ldap-backend.html
redirect 301 /admin-guide/keystone_token-binding.html /admin-guide/identity-token-binding.html
redirect 301 /admin-guide/keystone_tokens.html /admin-guide/identity-tokens.html
redirect 301 /admin-guide/keystone_use_trusts.html /admin-guide/identity-use-trusts.html

redirect 301 /admin-guide/keystone-caching-layer.html /admin-guide/identity-caching-layer.html
redirect 301 /admin-guide/keystone-certificates-for-pki.html /admin-guide/identity-certificates-for-pki.html
redirect 301 /admin-guide/keystone-domain-specific-config.html /admin-guide/identity-domain-specific-config.html
redirect 301 /admin-guide/keystone-external-authentication.html /admin-guide/identity-external-authentication.html
redirect 301 /admin-guide/keystone-fernet-token-faq.html /admin-guide/identity-fernet-token-faq.html
redirect 301 /admin-guide/keystone-integrate-identity-backend_ldap.html /admin-guide/identity-integrate-identity-backend-ldap.html
redirect 301 /admin-guide/keystone-integrate-with-ldap.html /admin-guide/identity-integrate-with-ldap.html
redirect 301 /admin-guide/keystone-secure-identity-to-ldap_backend.html /admin-guide/identity-secure-ldap-backend.html
redirect 301 /admin-guide/keystone-token-binding.html /admin-guide/identity-token-binding.html
redirect 301 /admin-guide/keystone-tokens.html /admin-guide/identity-tokens.html
redirect 301 /admin-guide/keystone-use-trusts.html /admin-guide/identity-use-trusts.html

redirect 301 /admin-guide/networking_adv-config.html /admin-guide/networking-adv-config.html
redirect 301 /admin-guide/networking_adv-features.html /admin-guide/networking-adv-features.html
redirect 301 /admin-guide/networking_adv-operational-features.html /admin-guide/networking-adv-operational-features.html
redirect 301 /admin-guide/networking_arch.html /admin-guide/networking-arch.html
redirect 301 /admin-guide/networking_auth.html /admin-guide/networking-auth.html
redirect 301 /admin-guide/networking_config-agents.html /admin-guide/networking-config-agents.html
redirect 301 /admin-guide/networking_config-identity.html /admin-guide/networking-config-identity.html
redirect 301 /admin-guide/networking_config-plugins.html /admin-guide/networking-config-plugins.html
redirect 301 /admin-guide/networking_introduction.html /admin-guide/networking-introduction.html
redirect 301 /admin-guide/networking_multi-dhcp-agents.html /admin-guide/networking-multi-dhcp-agents.html
redirect 301 /admin-guide/networking_use.html /admin-guide/networking-use.html
redirect 301 /admin-guide/objectstorage_account_reaper.html /admin-guide/objectstorage-account-reaper.html
redirect 301 /admin-guide/objectstorage_arch.html /admin-guide/objectstorage-arch.html
redirect 301 /admin-guide/objectstorage_auditors.html /admin-guide/objectstorage-auditors.html
redirect 301 /admin-guide/objectstorage_characteristics.html /admin-guide/objectstorage-characteristics.html
redirect 301 /admin-guide/objectstorage_components.html /admin-guide/objectstorage-components.html
redirect 301 /admin-guide/objectstorage_EC.html /admin-guide/objectstorage-EC.html
redirect 301 /admin-guide/objectstorage_features.html /admin-guide/objectstorage-features.html
redirect 301 /admin-guide/objectstorage_intro.html /admin-guide/objectstorage-intro.html
redirect 301 /admin-guide/objectstorage_large-objects.html /admin-guide/objectstorage-large-objects.html
redirect 301 /admin-guide/objectstorage_replication.html /admin-guide/objectstorage-replication.html
redirect 301 /admin-guide/objectstorage_ringbuilder.html /admin-guide/objectstorage-ringbuilder.html
redirect 301 /admin-guide/objectstorage_tenant_specific_image_storage.html /admin-guide/objectstorage-tenant-specific-image-storage.html
redirect 301 /admin-guide/shared_file_systems.html /admin-guide/shared-file-systems.html
redirect 301 /admin-guide/shared_file_systems_cgroups.html /admin-guide/shared-file-systems-cgroups.html
redirect 301 /admin-guide/shared_file_systems_crud_share.html /admin-guide/shared-file-systems-crud-share.html
redirect 301 /admin-guide/shared_file_systems_intro.html /admin-guide/shared-file-systems-intro.html
redirect 301 /admin-guide/shared_file_systems_key_concepts.html /admin-guide/shared-file-systems-key-concepts.html
redirect 301 /admin-guide/shared_file_systems_manage_and_unmanage_share.html /admin-guide/shared-file-systems-manage-and-unmanage-share.html
redirect 301 /admin-guide/shared_file_systems_manage_shares_cli.html /admin-guide/shared-file-systems-manage-shares-cli.html
redirect 301 /admin-guide/shared_file_systems_multi_backend.html /admin-guide/shared-file-systems-multi-backend.html
redirect 301 /admin-guide/shared_file_systems_network_plugins.html /admin-guide/shared-file-systems-network-plugins.html
redirect 301 /admin-guide/shared_file_systems_networking.html /admin-guide/shared-file-systems-networking.html
redirect 301 /admin-guide/shared_file_systems_quotas.html /admin-guide/shared-file-systems-quotas.html
redirect 301 /admin-guide/shared_file_systems_scheduling.html /admin-guide/shared-file-systems-scheduling.html
redirect 301 /admin-guide/shared_file_systems_security_services.html /admin-guide/shared-file-systems-security-services.html
redirect 301 /admin-guide/shared_file_systems_services_manage.html /admin-guide/shared-file-systems-services-manage.html
redirect 301 /admin-guide/shared_file_systems_share_management.html /admin-guide/shared-file-systems-share-management.html
redirect 301 /admin-guide/shared_file_systems_share_networks.html /admin-guide/shared-file-systems-share-networks.html
redirect 301 /admin-guide/shared_file_systems_share_replication.html /admin-guide/shared-file-systems-share-replication.html
redirect 301 /admin-guide/shared_file_systems_share_resize.html /admin-guide/shared-file-systems-share-resize.html
redirect 301 /admin-guide/shared_file_systems_share_types.html /admin-guide/shared-file-systems-share-types.html
redirect 301 /admin-guide/shared_file_systems_snapshots.html /admin-guide/shared-file-systems-snapshots.html
redirect 301 /admin-guide/shared_file_systems_troubleshoot.html /admin-guide/shared-file-systems-troubleshoot.html
redirect 301 /admin-guide/ts_cinder_config.html /admin-guide/ts-cinder-config.html
redirect 301 /admin-guide/ts_multipath_warn.html /admin-guide/ts-multipath-warn.html
redirect 301 /admin-guide/ts_no_emulator_x86_64.html /admin-guide/ts-no-emulator-x86-64.html
redirect 301 /admin-guide/ts_non_existent_host.html /admin-guide/ts-non-existent-host.html
redirect 301 /admin-guide/ts_non_existent_vlun.html /admin-guide/ts-non-existent-vlun.html
redirect 301 /admin-guide/ts_vol_attach_miss_sg_scan.html /admin-guide/ts-vol-attach-miss-sg-scan.html

# Redirect renamed User Guide pages

redirect 301 /user-guide/cli_swift_pseudo_hierarchical_folders_directories.html /user-guide/cli-swift-pseudo-hierarchical-folders-directories.html
redirect 301 /user-guide/sdk_configure_access_security_instances.html /user-guide/sdk-configure-access-security-instances.html
redirect 301 /user-guide/cli_create_and_manage_networks.html /user-guide/cli-create-and-manage-networks.html
redirect 301 /user-guide/cli_stop_and_start_an_instance.html /user-guide/cli-stop-and-start-an-instance.html
redirect 301 /user-guide/configure_access_and_security_for_instances.html /user-guide/configure-access-and-security-for-instances.html
redirect 301 /user-guide/dashboard_create_networks.html /user-guide/dashboard-create-networks.html
redirect 301 /user-guide/sdk_install.html /user-guide/sdk-install.html
redirect 301 /user-guide/create_db.html /user-guide/create-db.html
redirect 301 /user-guide/cli_manage_shares.html /user-guide/cli-manage-shares.html
redirect 301 /user-guide/cli_swift_discoverability.html /user-guide/cli-swift-discoverability.html
redirect 301 /user-guide/cli_access_instance_through_a_console.html /user-guide/cli-access-instance-through-a-console.html
redirect 301 /user-guide/cli_search_instance_with_ip_address.html /user-guide/cli-search-instance-with-ip-address.html
redirect 301 /user-guide/manage_db_config.html /user-guide/manage-db-config.html
redirect 301 /user-guide/cli_reboot_an_instance.html /user-guide/cli-reboot-an-instance.html
redirect 301 /user-guide/set_up_replication.html /user-guide/set-up-replication.html
redirect 301 /user-guide/cli_manage_bare_metal_nodes.html /user-guide/cli-manage-bare-metal-nodes.html
redirect 301 /user-guide/cli_ceilometer.html /user-guide/cli-ceilometer.html
redirect 301 /user-guide/cli_nova_launch_instance_from_volume.html /user-guide/cli-nova-launch-instance-from-volume.html
redirect 301 /user-guide/cli_nova_launch_instance_using_ISO_image.html /user-guide/cli-nova-launch-instance-using-ISO-image.html
redirect 301 /user-guide/backup_db.html /user-guide/backup-db.html
redirect 301 /user-guide/cli_nova_launch_instance_from_image.html /user-guide/cli-nova-launch-instance-from-image.html
redirect 301 /user-guide/dashboard_log_in.html /user-guide/dashboard-log-in.html
redirect 301 /user-guide/cli_provide_user_data_to_instances.html /user-guide/cli-provide-user-data-to-instances.html
redirect 301 /user-guide/cli_swift_static_website.html /user-guide/cli-swift-static-website.html
redirect 301 /user-guide/dashboard_manage_shares.html /user-guide/dashboard-manage-shares.html
redirect 301 /user-guide/cli_swift_manage_access_swift.html /user-guide/cli-swift-manage-access-swift.html
redirect 301 /user-guide/cli_swift_large_object_creation.html /user-guide/cli-swift-large-object-creation.html
redirect 301 /user-guide/cli_cheat_sheet.html /user-guide/cli-cheat-sheet.html
redirect 301 /user-guide/dashboard_manage_lbaasv2.html /user-guide/dashboard-manage-lbaasv2.html
redirect 301 /user-guide/sdk_assign_cors_headers.html /user-guide/sdk-assign-cors-headers.html
redirect 301 /user-guide/cli_swift_bulk_delete.html /user-guide/cli-swift-bulk-delete.html
redirect 301 /user-guide/cli_nova_configure_access_security_for_instances.html /user-guide/cli-nova-configure-access-security-for-instances.html
redirect 301 /user-guide/backup_db_incremental.html /user-guide/backup-db-incremental.html
redirect 301 /user-guide/cli_manage_instances_hosts.html /user-guide/cli-manage-instances-hosts.html
redirect 301 /user-guide/cli_delete_an_instance.html /user-guide/cli-delete-an-instance.html
redirect 301 /user-guide/cli_swift_env_vars.html /user-guide/cli-swift-env-vars.html
redirect 301 /user-guide/cli_swift_create_containers.html /user-guide/cli-swift-create-containers.html
redirect 301 /user-guide/sdk_neutron_apis.html /user-guide/sdk-neutron-apis.html
redirect 301 /user-guide/dashboard_manage_images.html /user-guide/dashboard-manage-images.html
redirect 301 /user-guide/dashboard_stacks.html /user-guide/dashboard-stacks.html
redirect 301 /user-guide/cli_swift_large_lists.html /user-guide/cli-swift-large-lists.html
redirect 301 /user-guide/dashboard_databases.html /user-guide/dashboard-databases.html
redirect 301 /user-guide/cli_swift_archive_auto_extract.html /user-guide/cli-swift-archive-auto-extract.html
redirect 301 /user-guide/cli_swift_set_object_versions.html /user-guide/cli-swift-set-object-versions.html
redirect 301 /user-guide/sdk_compute_apis.html /user-guide/sdk-compute-apis.html
redirect 301 /user-guide/cli_create_and_manage_stacks.html /user-guide/cli-create-and-manage-stacks.html
redirect 301 /user-guide/cli_change_the_size_of_your_server.html /user-guide/cli-change-the-size-of-your-server.html
redirect 301 /user-guide/cli_swift_serialized_response_formats.html /user-guide/cli-swift-serialized-response-formats.rhtml
redirect 301 /user-guide/sdk_authenticate.html /user-guide/sdk-authenticate.html
redirect 301 /user-guide/cli_use_snapshots_to_migrate_instances.html /user-guide/cli-use-snapshots-to-migrate-instances.html
redirect 301 /user-guide/sdk_manage_images.html /user-guide/sdk-manage-images.html
redirect 301 /user-guide/sdk_overview.html /user-guide/sdk-overview.html
redirect 301 /user-guide/cli_manage_images_curl.html /user-guide/cli-manage-images-curl.html
redirect 301 /user-guide/cli_config_drive.html /user-guide/cli-config-drive.html
redirect 301 /user-guide/cli_launch_instances.html /user-guide/cli-launch-instances.html
redirect 301 /user-guide/cli_manage_ip_addresses.html /user-guide/cli-manage-ip-addresses.html
redirect 301 /user-guide/set_up_clustering.html /user-guide/set-up-clustering.html
redirect 301 /user-guide/sdk_create_legacy_novaclient.html /user-guide/sdk-create-legacy-novaclient.html
redirect 301 /user-guide/sdk_schedule_objects_for_deletion.html /user-guide/sdk-schedule-objects-for-deletion.html
redirect 301 /user-guide/dashboard_launch_instances.html /user-guide/dashboard-launch-instances.html
redirect 301 /user-guide/dashboard_manage_containers.html /user-guide/dashboard-manage-containers.html
redirect 301 /user-guide/cli_swift_manage_objects.html /user-guide/cli-swift-manage-objects.html
redirect 301 /user-guide/dashboard_manage_volumes.html /user-guide/dashboard-manage-volumes.html

# Redirect renamed Ops Guide pages

redirect 301 /ops-guide/app_crypt.html /ops-guide/app-crypt.html
redirect 301 /ops-guide/ops_advanced_configuration.html /ops-guide/ops-advanced-configuration.html
redirect 301 /ops-guide/arch_provision.html /ops-guide/arch-provision.html
redirect 301 /ops-guide/ops_customize.html /ops-guide/ops-customize.html
redirect 301 /ops-guide/arch_example_neutron.html /ops-guide/arch-example-neutron.html
redirect 301 /ops-guide/arch_example_nova_network.html /ops-guide/arch-example-nova-network.html
redirect 301 /ops-guide/ops_lay_of_the_land.html /ops-guide/ops-lay-of-the-land.html
redirect 301 /ops-guide/ops_maintenance_rabbitmq.html /ops-guide/ops-maintenance-rabbitmq.html
redirect 301 /ops-guide/ops_customize_conclusion.html /ops-guide/ops-customize-conclusion.html
redirect 301 /ops-guide/ops_maintenance_storage.html /ops-guide/ops-maintenance-storage.html
redirect 301 /ops-guide/ops_maintenance_complete.html /ops-guide/ops-maintenance-complete.html
redirect 301 /ops-guide/ops_logging_monitoring.html /ops-guide/ops-logging-monitoring.html
redirect 301 /ops-guide/ops_logging.html /ops-guide/ops-logging.html
redirect 301 /ops-guide/ops_maintenance_slow.html /ops-guide/ops-maintenance-slow.html
redirect 301 /ops-guide/arch_examples.html /ops-guide/arch-examples.html
redirect 301 /ops-guide/ops_backup_recovery.html /ops-guide/ops-backup-recovery.html
redirect 301 /ops-guide/ops_maintenance_configuration.html /ops-guide/ops-maintenance-configuration.html
redirect 301 /ops-guide/ops_maintenance_hardware.html /ops-guide/ops-maintenance-hardware.html
redirect 301 /ops-guide/ops_customize_dashboard.html /ops-guide/ops-customize-dashboard.html
redirect 301 /ops-guide/ops_uninstall.html /ops-guide/ops-uninstall.html
redirect 301 /ops-guide/arch_storage.html /ops-guide/arch-storage.html
redirect 301 /ops-guide/app_roadmaps.html /ops-guide/app-roadmaps.html
redirect 301 /ops-guide/ops_maintenance_database.html /ops-guide/ops-maintenance-database.html
redirect 301 /ops-guide/ops_maintenance_hdmwy.html /ops-guide/ops-maintenance-hdmwy.html
redirect 301 /ops-guide/ops_customize_compute.html /ops-guide/ops-customize-compute.html
redirect 301 /ops-guide/arch_cloud_controller.html /ops-guide/arch-cloud-controller.html
redirect 301 /ops-guide/ops_maintenance_controller.html /ops-guide/ops-maintenance-controller.html
redirect 301 /ops-guide/ops_customize_development.html /ops-guide/ops-customize-development.html
redirect 301 /ops-guide/ops_maintenance_compute.html /ops-guide/ops-maintenance-compute.html
redirect 301 /ops-guide/app_resources.html /ops-guide/app-resources.html
redirect 301 /ops-guide/ops_projects.html /ops-guide/ops-projects.html
redirect 301 /ops-guide/arch_compute_nodes.html /ops-guide/arch-compute-nodes.html
redirect 301 /ops-guide/ops_projects_users.html /ops-guide/ops-projects-users.html
redirect 301 /ops-guide/ops_quotas.html /ops-guide/ops-quotas.html
redirect 301 /ops-guide/arch_network_design.html /ops-guide/arch-network-design.html
redirect 301 /ops-guide/ops_customize_objectstorage.html /ops-guide/ops-customize-objectstorage.html
redirect 301 /ops-guide/arch_scaling.html /ops-guide/arch-scaling.html
redirect 301 /ops-guide/ops_user_facing_operations.html /ops-guide/ops-user-facing-operations.html
redirect 301 /ops-guide/ops_maintenance_determine.html /ops-guide/ops-maintenance-determine.html
redirect 301 /ops-guide/ops_monitoring.html /ops-guide/ops-monitoring.html
redirect 301 /ops-guide/ops_upgrades.html /ops-guide/ops-upgrades.html
redirect 301 /ops-guide/ops_projects_users_summary.html /ops-guide/ops-projects-users-summary.html
redirect 301 /ops-guide/arch_example_thoughts.html /ops-guide/arch-example-thoughts.html
redirect 301 /ops-guide/ops_users.html /ops-guide/ops-users.html
redirect 301 /ops-guide/app_usecases.html /ops-guide/app-usecases.html
redirect 301 /ops-guide/ops_network_troubleshooting.html /ops-guide/ops-network-troubleshooting.html
redirect 301 /ops-guide/ops_logging_monitoring_summary.html /ops-guide/ops-logging-monitoring-summary.html
redirect 301 /ops-guide/ops_logging_rsyslog.html /ops-guide/ops-logging-rsyslog.html
redirect 301 /ops-guide/ops_maintenance.html /ops-guide/ops-maintenance.html

# Since we don't have a direct match for all file, redirect to the index page.

redirectmatch 301 "^/user-guide/content/.*$" /user-guide/index.html
redirectmatch 301 "^/user-guide-admin/.*$" /admin-guide/index.html
redirectmatch 301 "^/image-guide/content/.*$" /image-guide/index.html
redirectmatch 301 "^/arch-design/content/.*$" /arch-design/index.html
redirectmatch 301 "^/cli-reference/content/.*$" /cli-reference/index.html
redirectmatch 301 "^/admin-guide-cloud/.*$" /admin-guide/index.html
redirectmatch 301 "^/openstack-ops/content/.*$" /ops-guide/index.html

# Hot-guide has moved to heat repo
redirect 301 /user-guide/hot-guide/hot.html /developer/heat/template_guide/hot_guide.html
redirect 301 /user-guide/hot-guide/ /developer/heat/template_guide/

# All these files should be a direct match, file name for file name.
redirect 301 /hot-guide/content/ /developer/heat/template_guide/

# Redirect HOT reference guide to heat template guide
redirect 301 /hot-reference/content/ /developer/heat/template_guide/

# Redirect networking-guide since it is now versioned
redirect 301 /networking-guide/ /ocata/networking-guide/

# Redirect nova/devref/
redirectmatch 301 ^/developer/nova/devref/(.+)$ /developer/nova/$1
redirect 301 /developer/nova/nova.concepts.html /developer/nova/

# Redirect API Quick Start after migration to RST
redirect 301 /api/quick-start/content/ http://developer.openstack.org/api-guide/quick-start/
redirect 301 /de/api/quick-start/content/ http://developer.openstack.org/de/api-guide/quick-start/
redirect 301 /ja/api/quick-start/content/ http://developer.openstack.org/ja/api-guide/quick-start/
redirect 301 /ko_KR/api/quick-start/content/ http://developer.openstack.org/ko_KR/api-guide/quick-start/
redirect 301 /zh_CN/api/quick-start/content/ http://developer.openstack.org/zh_CN/api-guide/quick-start/

# Redirect old releases content to new location
redirectmatch 301 "^/releases.*$" http://releases.openstack.org$1

# Redirect outdated glossary to new location
redirectmatch 301 /glossary/content/glossary.html /user-guide/common/glossary.html

# Temporary redirect (307) until these guides are ready
redirectmatch 307 ^/mitaka/install-guide-debian/.*$ /mitaka/index.html

# Redirect old Configuration Reference pages to new location
redirect 301 /mitaka/config-reference/database-service/databaseservice_db.html /mitaka/config-reference/database-service/database.html
redirect 301 /mitaka/config-reference/database-service/databaseservice_rpc.html /mitaka/config-reference/database-service/rpc.html
redirect 301 /mitaka/config-reference/image-service/image_service_api.html /mitaka/config-reference/image-service/api.html
redirect 301 /mitaka/config-reference/image-service/image_service_backends.html /mitaka/config-reference/image-service/backends.html
redirect 301 /mitaka/config-reference/image-service/image_service_rpc.html /mitaka/config-reference/image-service/rpc.html
redirect 301 /mitaka/config-reference/orchestration/orchestration_api.html /mitaka/config-reference/orchestration/api.html
redirect 301 /mitaka/config-reference/orchestration/orchestration_clients.html /mitaka/config-reference/orchestration/clients.html
redirect 301 /mitaka/config-reference/orchestration/orchestration_rpc.html /mitaka/config-reference/orchestration/rpc.html
redirect 301 /mitaka/config-reference/telemetry/alarming_service_config_opts.html /mitaka/config-reference/telemetry/alarming-config-options.html
redirect 301 /mitaka/config-reference/telemetry/telemetry_service_config_opts.html /mitaka/config-reference/telemetry/telemetry-config-options.html

# Redirect networking guide content after reorganization (Patch ID 355672)

redirect 301 /mitaka/networking-guide/intro-network-address-translation.html /mitaka/networking-guide/intro-nat.html
redirect 301 /mitaka/networking-guide/intro-networking-components.html /mitaka/networking-guide/intro-network-components.html
redirect 301 /mitaka/networking-guide/intro-tunnel-technologies.html /mitaka/networking-guide/intro-overlay-protocols.html
redirect 301 /mitaka/networking-guide/intro-networking.html /mitaka/networking-guide/intro.html
redirect 301 /mitaka/networking-guide/intro-os-networking-features.html /mitaka/networking-guide/config-auto-allocation.html
redirect 301 /mitaka/networking-guide/migration-neutron-database.html /mitaka/networking-guide/migration-database.html
redirect 301 /mitaka/networking-guide/misc-neutron-purge.html /mitaka/networking-guide/ops-resource-purge.html
redirect 301 /mitaka/networking-guide/adv-config.html /mitaka/networking-guide/config.html
redirect 301 /mitaka/networking-guide/adv-config-address-scopes.html /mitaka/networking-guide/config-address-scopes.html
redirect 301 /mitaka/networking-guide/adv-config-availability-zone.html /mitaka/networking-guide/config-az.html
redirect 301 /mitaka/networking-guide/adv-config-bgp-dynamic-routing.hml /mitaka/networking-guide/config-bgp-dynamic-routing.html
redirect 301 /mitaka/networking-guide/adv-config-dns.html /mitaka/networking-guide/config-dns-int.html
redirect 301 /mitaka/networking-guide/adv-config-dvr-ha-snat.html /mitaka/networking-guide/config-dvr-ha-snat.html
redirect 301 /mitaka/networking-guide/adv-config-ipam.html /mitaka/networking-guide/config-ipam.html
redirect 301 /mitaka/networking-guide/adv-config-ipv6.html /mitaka/networking-guide/config-ipv6.html
redirect 301 /mitaka/networking-guide/adv-config-lbaas.html /mitaka/networking-guide/config-lbaas.html
redirect 301 /mitaka/networking-guide/adv-config-mtu.html /mitaka/networking-guide/config-mtu.html
redirect 301 /mitaka/networking-guide/adv-config-net-ip-availability.html /mitaka/networking-guide/ops-ip-availability.html
redirect 301 /mitaka/networking-guide/adv-config-ovsfwdriver.html /mitaka/networking-guide/config-ovsfwdriver.html
redirect 301 /mitaka/networking-guide/adv-config-qos.html /mitaka/networking-guide/config-qos.html
redirect 301 /mitaka/networking-guide/adv-config-rbac.html /mitaka/networking-guide/config-rbac.html
redirect 301 /mitaka/networking-guide/adv-config-service-chaining.html /mitaka/networking-guide/config-sfc.html
redirect 301 /mitaka/networking-guide/adv-config-sriov.html /mitaka/networking-guide/config-sriov.html
redirect 301 /mitaka/networking-guide/adv-config-subnet-pools.html /mitaka/networking-guide/config-subnet-pools.html
redirect 301 /mitaka/networking-guide/adv-config-tag.html /mitaka/networking-guide/ops-resource-tags.html

# Redirect removed CLI reference
redirect 301 /cli-reference/keystone.html /developer/python-openstackclient/command-list.html
redirect 301 /cli-reference/openstack.html /developer/python-openstackclient/
redirect 301 /cli-reference/sahara.html /developer/python-openstackclient/plugin-commands.html#sahara

# Redirect changed directory name in the Contributor Guide
redirect 301 /contributor-guide/ui-text-guidelines.html /contributor-guide/ux-ui-guidelines/ui-text-guidelines.html
redirect 301 /contributor-guide/ui-text-guidelines /contributor-guide/ux-ui-guidelines

# Redirect any deploy guide project directory back to the current stable index
redirectmatch 301 "^/project-deploy-guide/$" /project-deploy-guide/ocata/
redirectmatch 301 "^/project-deploy-guide/openstack-ansible/$" /project-deploy-guide/openstack-ansible/ocata/

# Redirecting infra docs links to new developer location
redirectmatch 301 "^/infra/shade(.*)$" /developer/shade$1

# Redirecting old project developer docs to the new project home pages
# while leaving the index / project list page as it is.
redirectmatch 301 "^/developer/([^/]+)/.*$" /$1/latest/

# Redirects from service-type to code-name
{% for project in projects -%}
{%- if project.type == 'service' and project.service_type %}
redirectmatch 302 "^/{{project.service_type|lower}}/.*$" /{{project.name}}/latest/
{%- endif %}
{%- endfor %}
# End service-type redirects

# Redirects from code-name without a series to latest
{% for project in projects -%}
{%- if project.type == 'service' and project.service_type %}
redirectmatch 301 "^/{{project.name}}/$" /{{project.name}}/latest/
{%- endif %}
{%- endfor %}
# End code-name redirects
