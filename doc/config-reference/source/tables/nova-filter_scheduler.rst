..
    Warning: Do not edit this file. It is automatically generated from the
    software project's code and your changes will be overwritten.

    The tool to generate this file lives in openstack-doc-tools repository.

    Please make any changes needed in the code, then run the
    autogenerate-config-doc tool from the openstack-doc-tools repository, or
    ask for help on the documentation mailing list, IRC channel or meeting.

.. _nova-filter_scheduler:

.. list-table:: Description of filter_scheduler configuration options
   :header-rows: 1
   :class: config-ref-table

   * - Configuration option = Default value
     - Description

   * - ``restrict_isolated_hosts_to_isolated_images`` = ``True``

     - (Boolean) Prevent non-isolated images from being built on isolated hosts.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'IsolatedHostsFilter' filter is enabled. Even then, this option doesn't affect the behavior of requests for isolated images, which will *always* be restricted to isolated hosts.

       Related options:

       * scheduler/isolated_images

       * scheduler/isolated_hosts

   * - ``soft_anti_affinity_weight_multiplier`` = ``1.0``

     - (Floating point) Multiplier used for weighing hosts for group soft-anti-affinity.

       Possible values:

       * An integer or float value, where the value corresponds to weight multiplier for hosts with group soft anti-affinity. Only a positive value are meaningful, as negative values would make this behave as a soft affinity weigher.

   * - ``max_io_ops_per_host`` = ``8``

     - (Integer) The number of instances that can be actively performing IO on a host.

       Instances performing IO includes those in the following states: build, resize, snapshot, migrate, rescue, unshelve.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'io_ops_filter' filter is enabled.

       Possible values:

       * An integer, where the integer corresponds to the max number of instances that can be actively performing IO on any given host.

   * - ``aggregate_image_properties_isolation_separator`` = ``.``

     - (String) Separator character(s) for image property namespace and name.

       When using the aggregate_image_properties_isolation filter, the relevant metadata keys are prefixed with the namespace defined in the aggregate_image_properties_isolation_namespace configuration option plus a separator. This option defines the separator to be used.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'aggregate_image_properties_isolation' filter is enabled.

       Possible values:

       * A string, where the string corresponds to an image property namespace separator character

       Related options:

       * aggregate_image_properties_isolation_namespace

   * - ``isolated_images`` =

     - (List) List of UUIDs for images that can only be run on certain hosts.

       If there is a need to restrict some images to only run on certain designated hosts, list those image UUIDs here.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'IsolatedHostsFilter' filter is enabled.

       Possible values:

       * A list of UUID strings, where each string corresponds to the UUID of an image

       Related options:

       * scheduler/isolated_hosts

       * scheduler/restrict_isolated_hosts_to_isolated_images

   * - ``host_subset_size`` = ``1``

     - (Integer) Size of subset of best hosts selected by scheduler.

       New instances will be scheduled on a host chosen randomly from a subset of the N best hosts, where N is the value set by this option.

       Setting this to a value greater than 1 will reduce the chance that multiple scheduler processes handling similar requests will select the same host, creating a potential race condition. By selecting a host randomly from the N hosts that best fit the request, the chance of a conflict is reduced. However, the higher you set this value, the less optimal the chosen host may be for a given request.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

       Possible values:

       * An integer, where the integer corresponds to the size of a host subset. Any integer is valid, although any value less than 1 will be treated as 1

   * - ``max_instances_per_host`` = ``50``

     - (Integer) Maximum number of instances that be active on a host.

       If you need to limit the number of instances on any given host, set this option to the maximum number of instances you want to allow. The num_instances_filter will reject any host that has at least as many instances as this option's value.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'num_instances_filter' filter is enabled.

       Possible values:

       * An integer, where the integer corresponds to the max instances that can be scheduled on a host.

   * - ``weight_classes`` = ``nova.scheduler.weights.all_weighers``

     - (List) Weighers that the scheduler will use.

       Only hosts which pass the filters are weighed. The weight for any host starts at 0, and the weighers order these hosts by adding to or subtracting from the weight assigned by the previous weigher. Weights may become negative. An instance will be scheduled to one of the N most-weighted hosts, where N is 'scheduler_host_subset_size'.

       By default, this is set to all weighers that are included with Nova.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

       Possible values:

       * A list of zero or more strings, where each string corresponds to the name of a weigher that will be used for selecting a host

   * - ``io_ops_weight_multiplier`` = ``-1.0``

     - (Floating point) IO operations weight multipler ratio.

       This option determines how hosts with differing workloads are weighed. Negative values, such as the default, will result in the scheduler preferring hosts with lighter workloads whereas positive values will prefer hosts with heavier workloads. Another way to look at it is that positive values for this option will tend to schedule instances onto hosts that are already busy, while negative values will tend to distribute the workload across more hosts. The absolute value, whether positive or negative, controls how strong the io_ops weigher is relative to other weighers.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'io_ops' weigher is enabled.

       Possible values:

       * An integer or float value, where the value corresponds to the multipler ratio for this weigher.

   * - ``disk_weight_multiplier`` = ``1.0``

     - (Floating point) Disk weight multipler ratio.

       Multiplier used for weighing free disk space. Negative numbers mean to stack vs spread.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'ram' weigher is enabled.

       Possible values:

       * An integer or float value, where the value corresponds to the multipler ratio for this weigher.

   * - ``isolated_hosts`` =

     - (List) List of hosts that can only run certain images.

       If there is a need to restrict some images to only run on certain designated hosts, list those host names here.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'IsolatedHostsFilter' filter is enabled.

       Possible values:

       * A list of strings, where each string corresponds to the name of a host

       Related options:

       * scheduler/isolated_images

       * scheduler/restrict_isolated_hosts_to_isolated_images

   * - ``track_instance_changes`` = ``True``

     - (Boolean) Enable querying of individual hosts for instance information.

       The scheduler may need information about the instances on a host in order to evaluate its filters and weighers. The most common need for this information is for the (anti-)affinity filters, which need to choose a host based on the instances already running on a host.

       If the configured filters and weighers do not need this information, disabling this option will improve performance. It may also be disabled when the tracking overhead proves too heavy, although this will cause classes requiring host usage data to query the database on each request instead.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

   * - ``ram_weight_multiplier`` = ``1.0``

     - (Floating point) Ram weight multipler ratio.

       This option determines how hosts with more or less available RAM are weighed. A positive value will result in the scheduler preferring hosts with more available RAM, and a negative number will result in the scheduler preferring hosts with less available RAM. Another way to look at it is that positive values for this option will tend to spread instances across many hosts, while negative values will tend to fill up (stack) hosts as much as possible before scheduling to a less-used host. The absolute value, whether positive or negative, controls how strong the RAM weigher is relative to other weighers.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'ram' weigher is enabled.

       Possible values:

       * An integer or float value, where the value corresponds to the multipler ratio for this weigher.

   * - ``soft_affinity_weight_multiplier`` = ``1.0``

     - (Floating point) Multiplier used for weighing hosts for group soft-affinity.

       Possible values:

       * An integer or float value, where the value corresponds to weight multiplier for hosts with group soft affinity. Only a positive value are meaningful, as negative values would make this behave as a soft anti-affinity weigher.

   * - ``use_baremetal_filters`` = ``False``

     - (Boolean) Enable baremetal filters.

       Set this to True to tell the nova scheduler that it should use the filters specified in the 'baremetal_scheduler_enabled_filters' option. If you are not scheduling baremetal nodes, leave this at the default setting of False.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

       Related options:

       * If this option is set to True, then the filters specified in the 'baremetal_scheduler_enabled_filters' are used instead of the filters specified in 'scheduler_enabled_filters'.

   * - ``aggregate_image_properties_isolation_namespace`` = ``None``

     - (String) Image property namespace for use in the host aggregate.

       Images and hosts can be configured so that certain images can only be scheduled to hosts in a particular aggregate. This is done with metadata values set on the host aggregate that are identified by beginning with the value of this option. If the host is part of an aggregate with such a metadata key, the image in the request spec must have the value of that metadata in its properties in order for the scheduler to consider the host as acceptable.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect. Also note that this setting only affects scheduling if the 'aggregate_image_properties_isolation' filter is enabled.

       Possible values:

       * A string, where the string corresponds to an image property namespace

       Related options:

       * aggregate_image_properties_isolation_separator

   * - ``enabled_filters`` = ``RetryFilter, AvailabilityZoneFilter, RamFilter, DiskFilter, ComputeFilter, ComputeCapabilitiesFilter, ImagePropertiesFilter, ServerGroupAntiAffinityFilter, ServerGroupAffinityFilter``

     - (List) Filters that the scheduler will use.

       An ordered list of filter class names that will be used for filtering hosts. Ignore the word 'default' in the name of this option: these filters will *always* be applied, and they will be applied in the order they are listed so place your most restrictive filters first to make the filtering process more efficient.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

       Possible values:

       * A list of zero or more strings, where each string corresponds to the name of a filter to be used for selecting a host

       Related options:

       * All of the filters in this option *must* be present in the 'scheduler_available_filters' option, or a SchedulerHostFilterNotFound exception will be raised.

   * - ``available_filters`` = ``['nova.scheduler.filters.all_filters']``

     - (Multi-valued) Filters that the scheduler can use.

       An unordered list of the filter classes the nova scheduler may apply. Only the filters specified in the 'scheduler_enabled_filters' option will be used, but any filter appearing in that option must also be included in this list.

       By default, this is set to all filters that are included with nova.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

       Possible values:

       * A list of zero or more strings, where each string corresponds to the name of a filter that may be used for selecting a host

       Related options:

       * scheduler_enabled_filters

   * - ``baremetal_enabled_filters`` = ``RetryFilter, AvailabilityZoneFilter, ComputeFilter, ComputeCapabilitiesFilter, ImagePropertiesFilter, ExactRamFilter, ExactDiskFilter, ExactCoreFilter``

     - (List) Filters used for filtering baremetal hosts.

       Filters are applied in order, so place your most restrictive filters first to make the filtering process more efficient.

       This option is only used by the FilterScheduler and its subclasses; if you use a different scheduler, this option has no effect.

       Possible values:

       * A list of zero or more strings, where each string corresponds to the name of a filter to be used for selecting a baremetal host

       Related options:

       * If the 'scheduler_use_baremetal_filters' option is False, this option has no effect.
